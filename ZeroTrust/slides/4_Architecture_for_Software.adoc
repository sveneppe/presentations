== Zero Trust - Architektur in Softwareanwendungen â˜•

[%notitle]
=== Einstieg

âš ï¸ Ein Gedankenexperiment! âš ï¸

[.notes]
--
* Folgendes Szenario:
** Es gibt einen einzelnen Microservice der durch eine schwache Authentifizierung kompromittiert wurde.
Dadurch bekommt eine nicht authorisierte Person Zugang zu hochsensiblen Personendaten innerhalb der Anwendung und kann auch Daten von der zugehÃ¶rigen Datenbank abfragen.
Zu allem Ãœbel schaft es die Person aus dem Container und kann sich lateral im Netzwerk bewegen.
Wer ist/war verantwortlich fÃ¼r die Sicherheit des Microservice-Systems & den Docker Container?
*** Das Entwicklungsteam!
--

=== Klassische Server Client Modelle

* Wir erinnern uns an traditionelle SicherheitsmaÃŸnahmen?
** Die gibt es auch fÃ¼r Anwendungen

=== Traditionelle Absicherung

[%step]
* TLS fÃ¼r Transportschicht

[%step]
* Benutzername Passwort zur Authentifizierung

[%step]
--
* Klassisches Rollenmodell
** *Admin* = darf alles -> Und jeder im Unternehmen kennt das Passwort ğŸ‘
** *Entwickler* = darf alles + +
darf noch viel mehr, wenn es mal nicht sofort klappt ğŸ™ˆ
--

[%step]
* Achja ... weitere Rollen braucht es nicht, Admin und Dev reichen doch ğŸ˜

[%step]
* Aber die Anwendung!... Die braucht einen technischen Nutzer!


=== Typische Schwachstellen in Anwendungen

* Flaches Netz -> Alle Systeme vertrauen sich implizit
* Keine Service-Authentisierung -> TLS schÃ¼tzt Transport, nicht IdentitÃ¤t
* Unsichere APIs -> Input Validation und co. -> Was ist das?
* Kein Audit-Trail -> Mein Prozess ruft doch nur 1 Instanz auf..... oder nicht?


=== MaÃŸnahmen nach Zero Trust

[cols="2,3,1",options="header",]
|===
|MaÃŸnahme |Umsetzung |Bewertung
|mTLS |Server & Client-Zertifikate mit gegenseitiger Authentifizierung | *
|Zentrale Authentifizierung |Keycloak + OpenID Connect |âœ”ï¸
|Minimale Zugriffsrechte |Fine-grained Roles & Scopes |ğŸ¤”
|Input-Validierung |OWASP-KonformitÃ¤t (Validatoren, Constraints) |(âœ”ï¸)
|Isolierte Container |Docker mit Netzwerk-Policies |ğŸ¤¨
|Service Mesh (optional) |z.B. https://istio.io/latest/about/service-mesh/[Istio mit AuthN/AuthZ-Regeln] |â“ğŸ˜‚
|===

[.notes]
--
* mTLS ... das ignorieren wir mal kurz
* Keycloak + OpenID Connect: Haben wir ne.... joa Top!
** Auch Ã¼berall im Einsatz ne ;)
* Minimale Zugriffsrechte: Let's talk about that later :D
* Input Validierung: Fangen wir grade an oder
** OWASP-Konform .... naja egal
* Isolierte Container: Naja, wir nutzen Container... Netzwerk-Konfig haben wir gerade zu 80 Prozent bei allen raus gehauen ne...
* Service Mesh: Haha, ... was ist das?!
--

=== What Next?

=== Coding-Session ğŸ˜

Von Standard TLS zu mTLS mit Payara Micro + Docker

=== Noch Fit?

[.notes]
--
* KÃ¶nnt ihr noch, oder wollen wir diskutieren, ob das sinnvoll ist?
--

=== Was passiert hier?

[source, Dockerfile]
--
FROM golang:1.20.8-alpine as builder

WORKDIR /app
COPY go.mod go.sum ./
RUN go mod download
COPY . .
RUN CGO_ENABLED=0 GOOS=linux go build -o myapp

FROM scratch as final

COPY --from=builder /app/myapp /
--

=== Aktuelle Kommunikation

link:images/Aktuelle_Netzkommunikation.png[Aktuelle Netzkommunikation]


=== Kommunikation Stufe 1

link:images/Mit_Proxy_Netzsegmentierung.png[MÃ¶gliche Netzkommunikation mit Proxy]

=== Coding-Session II ğŸ˜

Docker & Payara Hardening




